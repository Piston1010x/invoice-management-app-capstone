<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <title>Clients</title>
  <style>
    .scroll-table-wrapper {
      max-height: 500px;
      overflow-y: auto;
      border: 1px solid #dee2e6;
      border-radius: 0.375rem;
    }
    thead th {
      position: sticky;
      top: 0;
      background-color: #f8f9fa;
      z-index: 2;
    }
  </style>
</head>
<body class="p-4">

<div th:replace="fragments/navbar :: body"></div>

<h1 class="mb-3">Clients</h1>

<div th:if="${success}" class="alert alert-success" th:text="${success}"></div>

<div class="scroll-table-wrapper">
  <table class="table table-hover align-middle mb-0">
    <thead class="table-light">
    <tr>
      <th>Name</th>
      <th>Email</th>
      <th>Phone</th>
      <th class="text-end">Actions</th>
    </tr>
    </thead>

    <tbody>
    <tr th:each="c : ${clients}">
      <td th:text="${c.name}">Acme Ltd</td>
      <td>
        <a th:href="'mailto:' + ${c.email}" th:text="${c.email}">email</a>
      </td>
      <td>
        <a th:href="'tel:' + ${c.phone}" th:text="${c.phone}">phone</a>
      </td>
      <td class="text-end">
        <!-- Edit -->
        <a th:href="@{|/admin/clients/${c.id}/edit|}"
           class="btn btn-sm btn-outline-primary">Edit</a>

        <!-- Delete -->
        <form th:action="@{|/admin/clients/${c.id}/delete|}"
              method="post" style="display:inline"
              onsubmit="return confirm('Are you sure you want to delete this client?');">
          <button class="btn btn-sm btn-outline-danger">Delete</button>
        </form>

        <!-- New Invoice -->
        <a th:href="@{|/admin/invoices/new?clientId=${c.id}|}"
           class="btn btn-sm btn-success">New Invoice</a>
      </td>
    </tr>
    </tbody>
  </table>
</div>

<a href="/admin/clients/new"
   class="btn btn-primary rounded-circle"
   style="position:fixed;bottom:2rem;right:2rem;width:60px;height:60px;
          display:flex;align-items:center;justify-content:center;font-size:1.5rem;">
  +
</a>
</body>
</html>
